import{h as n}from"./app.4ca8afde.js";import{_ as s}from"./plugin-vue_export-helper.21dcd24c.js";const a={},t=n(`<h1 id="\u5982\u4F55\u7528-js-\u5B9E\u73B0-hash-\u8DEF\u7531" tabindex="-1"><a class="header-anchor" href="#\u5982\u4F55\u7528-js-\u5B9E\u73B0-hash-\u8DEF\u7531" aria-hidden="true">#</a> \u5982\u4F55\u7528 JS \u5B9E\u73B0 hash \u8DEF\u7531</h1><p>\u524D\u7AEF\u8DEF\u7531\u539F\u7406</p><ul><li>vue-router \u7684\u8DEF\u7531\u6A21\u5F0F</li><li>hash</li><li>H5 history</li></ul><p>\u7F51\u9875 url \u7EC4\u6210\u90E8\u5206</p><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token comment">// http://localhost:8080/test/test.html?a=100#100</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>location<span class="token punctuation">.</span>protocol<span class="token punctuation">)</span> <span class="token comment">// http:</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>location<span class="token punctuation">.</span>host<span class="token punctuation">)</span> <span class="token comment">// localhost</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>location<span class="token punctuation">.</span>port<span class="token punctuation">)</span> <span class="token comment">// 8080</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>location<span class="token punctuation">.</span>pathname<span class="token punctuation">)</span> <span class="token comment">// /test/test.html</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>location<span class="token punctuation">.</span>search<span class="token punctuation">)</span> <span class="token comment">// ?a=100</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>location<span class="token punctuation">.</span>hash<span class="token punctuation">)</span> <span class="token comment">// #100</span>
</code></pre></div><p>hash \u7684\u7279\u70B9</p><ul><li>hash \u53D8\u5316\u4F1A\u89E6\u53D1\u7F51\u9875\u8DF3\u8F6C\uFF0C\u5373\u6D4F\u89C8\u5668\u7684\u524D\u8FDB\uFF0C\u540E\u7AEF</li><li>hash \u53D8\u5316\u4E0D\u4F1A\u5237\u65B0\u9875\u9762\uFF0CSPA \u5FC5\u9700\u7684\u7279\u70B9</li><li>hash \u6C38\u8FDC\u4E0D\u4F1A\u63D0\u4EA4\u5230 server \u7AEF\uFF08\u524D\u7AEF\u81EA\u751F\u81EA\u706D\uFF09</li></ul><p>\u6F14\u793A\u4E00\u4E0B</p><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token operator">&lt;</span>button id<span class="token operator">=</span><span class="token string">&quot;btn&quot;</span><span class="token operator">&gt;</span>\u4FEE\u6539 hash<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
    <span class="token comment">// hash \u53D8\u5316\uFF0C\u5305\u542B\uFF1A</span>
    <span class="token comment">// a. JS \u4FEE\u6539 url</span>
    <span class="token comment">// b. \u624B\u52A8\u4FEE\u6539 url \u7684 hash</span>
    <span class="token comment">// c. \u6D4F\u89C8\u5668\u524D\u8FDB\u3001\u540E\u9000</span>
    window<span class="token punctuation">.</span><span class="token function-variable function">onhashchange</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;old url&#39;</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span>oldURL<span class="token punctuation">)</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;new url&#39;</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span>newURL<span class="token punctuation">)</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;hash&#39;</span><span class="token punctuation">,</span> location<span class="token punctuation">.</span>hash<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// \u9875\u9762\u521D\u6B21\u52A0\u8F7D\uFF0C\u83B7\u53D6 hash</span>
    document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;DOMContentLoaded&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;hash:&#39;</span><span class="token punctuation">,</span> location<span class="token punctuation">.</span>hash<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token comment">// JS \u4FEE\u6539 url</span>
    document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;btn&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;click&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        location<span class="token punctuation">.</span>href <span class="token operator">=</span> <span class="token string">&#39;#/user&#39;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre></div><p>\u4EE5\u4E0A\u4E00\u5F00\u59CB\u4E3A\u7A7A\uFF0C\u70B9\u51FB\u4E00\u4E0B\u89E6\u53D1 onhashchange \u8F93\u51FA\uFF1A</p><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token comment">// \u4E00\u5F00\u59CB\u4E3A\u7A7A\uFF0C\u70B9\u51FB\u4E00\u4E0B\u89E6\u53D1 onhashchange</span>
<span class="token comment">// hash:</span>
<span class="token comment">// old url http://localhost/test/test.html</span>
<span class="token comment">// new url http://localhost/test/test.html#/user</span>
<span class="token comment">// hash #/user</span>
</code></pre></div>`,11);function p(o,c){return t}var u=s(a,[["render",p]]);export{u as default};
