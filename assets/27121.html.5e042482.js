import{d as o,o as p,c as e,a as n,e as t,F as c,g as s,h as l}from"./app.4ca8afde.js";import{_ as u}from"./plugin-vue_export-helper.21dcd24c.js";const i={},r=n("h1",{id:"\u5982\u4F55\u7528-js-\u5B9E\u73B0-h5-history-\u8DEF\u7531",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u5982\u4F55\u7528-js-\u5B9E\u73B0-h5-history-\u8DEF\u7531","aria-hidden":"true"},"#"),s(" \u5982\u4F55\u7528 JS \u5B9E\u73B0 H5 history \u8DEF\u7531")],-1),k=n("p",null,"H5 history",-1),h=n("ul",null,[n("li",null,"\u7528 url \u89C4\u8303\u7684\u8DEF\u7531\uFF0C\u4F46\u8DF3\u8F6C\u65F6\u4E0D\u5237\u65B0\u9875\u9762"),n("li",null,"history.pushState"),n("li",null,"window.onpopstate")],-1),_=n("p",null,"\u6B63\u5E38\u9875\u9762\u6D4F\u89C8",-1),d={href:"http://github.com/x",target:"_blank",rel:"noopener noreferrer"},m=s("http://github.com/x"),g=s(" \u5237\u65B0\u9875\u9762"),f={href:"http://github.com/x/y",target:"_blank",rel:"noopener noreferrer"},b=s("http://github.com/x/y"),x=s(" \u5237\u65B0\u9875\u9762"),y=n("p",null,"\u6539\u9020\u6210 H5 history \u6A21\u5F0F",-1),v={href:"http://github.com/x",target:"_blank",rel:"noopener noreferrer"},E=s("http://github.com/x"),j=s(" \u5237\u65B0\u9875\u9762"),w={href:"http://github.com/x/y",target:"_blank",rel:"noopener noreferrer"},L=s("http://github.com/x/y"),S=s(" \u524D\u7AEF\u8DF3\u8F6C\uFF0C\u4E0D\u5237\u65B0\u9875\u9762"),q=l(`<p>\u6F14\u793A\u4E0B</p><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token operator">&lt;</span>button id<span class="token operator">=</span><span class="token string">&quot;btn&quot;</span><span class="token operator">&gt;</span>\u4FEE\u6539 url<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
    <span class="token comment">// \u9875\u9762\u521D\u6B21\u52A0\u8F7D\uFF0C\u83B7\u53D6 path</span>
    document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;DOMContentLoaded&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;load&#39;</span><span class="token punctuation">,</span> location<span class="token punctuation">.</span>pathname<span class="token punctuation">)</span> <span class="token comment">// load /test/test.html</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token comment">// \u6253\u5F00\u4E00\u4E2A\u65B0\u7684\u8DEF\u7531</span>
    <span class="token comment">// \u3010\u6CE8\u610F\u3011\u7528 pushState \u65B9\u5F0F\uFF0C\u6D4F\u89C8\u5668\u4E0D\u4F1A\u5237\u65B0\u9875\u9762</span>
    document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;btn&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;click&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> state <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;page1&#39;</span><span class="token punctuation">}</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;\u5207\u6362\u8DEF\u7531\u5230&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;page1&#39;</span><span class="token punctuation">)</span>
        history<span class="token punctuation">.</span><span class="token function">pushState</span><span class="token punctuation">(</span>state<span class="token punctuation">,</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;page1&#39;</span><span class="token punctuation">)</span> <span class="token comment">// \u91CD\u8981 \uFF01\uFF01</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token comment">// \u76D1\u542C\u6D4F\u89C8\u5668\u524D\u8FDB\uFF0C\u540E\u9000\uFF0C\u89C2\u5BDF\u6D4F\u89C8\u5668 url \u7684\u53D8\u5316</span>
    window<span class="token punctuation">.</span><span class="token function-variable function">onpopstate</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span> <span class="token comment">// \u91CD\u8981 \uFF01\uFF01</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;onpopstate&#39;</span><span class="token punctuation">,</span>e<span class="token punctuation">.</span>state<span class="token punctuation">,</span>location<span class="token punctuation">.</span>pathname<span class="token punctuation">)</span>
        <span class="token comment">// \u540E\u7AEF\uFF1Aonpopstate null /test/test.html</span>
        <span class="token comment">// \u524D\u8FDB\uFF1Aonpopstate {name: &quot;page1&quot;} /test/page1</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// \u9700\u8981 server \u7AEF\u914D\u5408</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre></div>`,2);function B(N,V){const a=o("ExternalLinkIcon");return p(),e(c,null,[r,k,h,_,n("ul",null,[n("li",null,[n("a",d,[m,t(a)]),g]),n("li",null,[n("a",f,[b,t(a)]),x])]),y,n("ul",null,[n("li",null,[n("a",v,[E,t(a)]),j]),n("li",null,[n("a",w,[L,t(a)]),S])]),q],64)}var C=u(i,[["render",B]]);export{C as default};
