import{h as s}from"./app.4ca8afde.js";import{_ as a}from"./plugin-vue_export-helper.21dcd24c.js";const n={},p=s(`<h1 id="\u5B9D\u5854\u91CD\u65B0\u7F16\u8BD1nginx-\u9690\u85CFserver\u4FE1\u606F\u548C\u7248\u672C\u4FE1\u606F" tabindex="-1"><a class="header-anchor" href="#\u5B9D\u5854\u91CD\u65B0\u7F16\u8BD1nginx-\u9690\u85CFserver\u4FE1\u606F\u548C\u7248\u672C\u4FE1\u606F" aria-hidden="true">#</a> \u5B9D\u5854\u91CD\u65B0\u7F16\u8BD1nginx\uFF0C\u9690\u85CFserver\u4FE1\u606F\u548C\u7248\u672C\u4FE1\u606F</h1><p><strong>\u73AF\u5883</strong><br> \u7CFB\u7EDF: CentOS Linux 7.6.1810 (Core)<br> \u5B9D\u5854\uFF1A\u514D\u8D39\u7248 5.9.1<br> Nginx\u7248\u672C\uFF1A1.15</p><p><strong>\u9700\u6C42</strong><br> \u9690\u85CFnginx\u7684server\u4FE1\u606F\u548C\u7248\u672C\u4FE1\u606F</p><h2 id="\u4FEE\u6539\u914D\u7F6E\u548C\u6E90\u7801" tabindex="-1"><a class="header-anchor" href="#\u4FEE\u6539\u914D\u7F6E\u548C\u6E90\u7801" aria-hidden="true">#</a> \u4FEE\u6539\u914D\u7F6E\u548C\u6E90\u7801</h2><p>1.\u9690\u85CF\u7248\u672C\u4FE1\u606F</p><p>\u5728nginx.conf\u91CC\u9762\u6DFB\u52A0</p><div class="language-javascript ext-js"><pre class="language-javascript"><code>server_tokens off<span class="token punctuation">;</span> 
</code></pre></div><p>2.\u9690\u85CFserver\u4FE1\u606F\uFF08\u9700\u8981\u91CD\u65B0\u7F16\u8BD1ngnix\uFF09</p><p>\u8FDB\u5165nginx\u6E90\u7801\u76EE\u5F55/www/server/nginx/src</p><div class="language-javascript ext-js"><pre class="language-javascript"><code># vi src<span class="token operator">/</span>http<span class="token operator">/</span>ngx_http_header_filter_module<span class="token punctuation">.</span>c 
</code></pre></div><p>\u5C06</p><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token keyword">static</span> u_char ngx_http_server_string<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;Server: nginx&quot;</span> <span class="token constant">CRLF</span><span class="token punctuation">;</span>
<span class="token keyword">static</span> u_char ngx_http_server_full_string<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;Server: &quot;</span> <span class="token constant">NGINX_VER</span> <span class="token constant">CRLF</span><span class="token punctuation">;</span>
<span class="token keyword">static</span> u_char ngx_http_server_build_string<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;Server: &quot;</span> <span class="token constant">NGINX_VER_BUILD</span> <span class="token constant">CRLF</span><span class="token punctuation">;</span> 
</code></pre></div><p>\u6539\u4E3A</p><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token keyword">static</span> u_char ngx_http_server_string<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;Server: webServer&quot;</span> <span class="token constant">CRLF</span><span class="token punctuation">;</span>
<span class="token keyword">static</span> u_char ngx_http_server_full_string<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;Server: webServer&quot;</span> <span class="token constant">CRLF</span><span class="token punctuation">;</span>
<span class="token keyword">static</span> u_char ngx_http_server_build_string<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;Server: webServer&quot;</span> <span class="token constant">CRLF</span><span class="token punctuation">;</span> 
</code></pre></div><h2 id="\u91CD\u65B0\u7F16\u8BD1nginx" tabindex="-1"><a class="header-anchor" href="#\u91CD\u65B0\u7F16\u8BD1nginx" aria-hidden="true">#</a> \u91CD\u65B0\u7F16\u8BD1nginx</h2><p>\u7531\u4E8E\u4F7F\u7528\u5B9D\u5854\u5B89\u88C5nginx\uFF0C\u6240\u4EE5\u53EF\u4EE5\u53C2\u8003\u5B9D\u5854\u5B89\u88C5\u811A\u672C\uFF1A<code>/www/server/panel/install/nginx.sh</code></p><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token operator">...</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">&quot;\${version}&quot;</span> <span class="token operator">==</span> <span class="token string">&quot;1.15&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>then
        <span class="token punctuation">.</span><span class="token operator">/</span>configure <span class="token operator">--</span>user<span class="token operator">=</span>www <span class="token operator">--</span>group<span class="token operator">=</span>www <span class="token operator">--</span>prefix<span class="token operator">=</span>$<span class="token punctuation">{</span>Setup_Path<span class="token punctuation">}</span> <span class="token operator">--</span><span class="token keyword">with</span><span class="token operator">-</span>openssl<span class="token operator">=</span>$<span class="token punctuation">{</span>Setup_Path<span class="token punctuation">}</span><span class="token operator">/</span>src<span class="token operator">/</span>openssl <span class="token operator">--</span>add<span class="token operator">-</span>module<span class="token operator">=</span>$<span class="token punctuation">{</span>Setup_Path<span class="token punctuation">}</span><span class="token operator">/</span>src<span class="token operator">/</span>ngx_devel_kit <span class="token operator">--</span>add<span class="token operator">-</span>module<span class="token operator">=</span>$<span class="token punctuation">{</span>Setup_Path<span class="token punctuation">}</span><span class="token operator">/</span>src<span class="token operator">/</span>lua_nginx_module <span class="token operator">--</span>add<span class="token operator">-</span>module<span class="token operator">=</span>$<span class="token punctuation">{</span>Setup_Path<span class="token punctuation">}</span><span class="token operator">/</span>src<span class="token operator">/</span>ngx_cache_purge <span class="token operator">--</span>add<span class="token operator">-</span>module<span class="token operator">=</span>$<span class="token punctuation">{</span>Setup_Path<span class="token punctuation">}</span><span class="token operator">/</span>src<span class="token operator">/</span>nginx<span class="token operator">-</span>sticky<span class="token operator">-</span>module <span class="token operator">--</span><span class="token keyword">with</span><span class="token operator">-</span>http_stub_status_module <span class="token operator">--</span><span class="token keyword">with</span><span class="token operator">-</span>http_ssl_module <span class="token operator">--</span><span class="token keyword">with</span><span class="token operator">-</span>http_v2_module <span class="token operator">--</span><span class="token keyword">with</span><span class="token operator">-</span>http_image_filter_module <span class="token operator">--</span><span class="token keyword">with</span><span class="token operator">-</span>http_gzip_static_module <span class="token operator">--</span><span class="token keyword">with</span><span class="token operator">-</span>http_gunzip_module <span class="token operator">--</span><span class="token keyword">with</span><span class="token operator">-</span>stream <span class="token operator">--</span><span class="token keyword">with</span><span class="token operator">-</span>stream_ssl_module <span class="token operator">--</span><span class="token keyword">with</span><span class="token operator">-</span>ipv6 <span class="token operator">--</span><span class="token keyword">with</span><span class="token operator">-</span>http_sub_module <span class="token operator">--</span><span class="token keyword">with</span><span class="token operator">-</span>http_flv_module <span class="token operator">--</span><span class="token keyword">with</span><span class="token operator">-</span>http_addition_module <span class="token operator">--</span><span class="token keyword">with</span><span class="token operator">-</span>http_realip_module <span class="token operator">--</span><span class="token keyword">with</span><span class="token operator">-</span>http_mp4_module <span class="token operator">--</span><span class="token keyword">with</span><span class="token operator">-</span>ld<span class="token operator">-</span>opt<span class="token operator">=</span><span class="token string">&quot;-Wl,-E&quot;</span> <span class="token operator">--</span><span class="token keyword">with</span><span class="token operator">-</span>openssl<span class="token operator">-</span>opt<span class="token operator">=</span><span class="token string">&quot;enable-tls1_3 enable-weak-ssl-ciphers&quot;</span> <span class="token operator">--</span><span class="token keyword">with</span><span class="token operator">-</span>cc<span class="token operator">-</span>opt<span class="token operator">=</span><span class="token string">&quot;-Wno-error&quot;</span> $<span class="token punctuation">{</span>jemallocLD<span class="token punctuation">}</span>
<span class="token operator">...</span> 
</code></pre></div><blockquote><p>\u5C06 \${Setup_Path} \u6539\u4E3A /www/server/nginx<br> \u5C06 \${jemallocLD} \u6539\u4E3A --with-ld-opt=&quot;-ljemalloc&quot;</p></blockquote><p><strong>\u7F16\u8BD1nginx</strong></p><div class="language-javascript ext-js"><pre class="language-javascript"><code># cd <span class="token operator">/</span>www<span class="token operator">/</span>server<span class="token operator">/</span>nginx<span class="token operator">/</span>src
# <span class="token punctuation">.</span><span class="token operator">/</span>configure <span class="token operator">--</span>user<span class="token operator">=</span>www <span class="token operator">--</span>group<span class="token operator">=</span>www <span class="token operator">--</span>prefix<span class="token operator">=</span><span class="token operator">/</span>www<span class="token operator">/</span>server<span class="token operator">/</span>nginx <span class="token operator">--</span><span class="token keyword">with</span><span class="token operator">-</span>openssl<span class="token operator">=</span><span class="token operator">/</span>www<span class="token operator">/</span>server<span class="token operator">/</span>nginx<span class="token operator">/</span>src<span class="token operator">/</span>openssl <span class="token operator">--</span>add<span class="token operator">-</span>module<span class="token operator">=</span><span class="token operator">/</span>www<span class="token operator">/</span>server<span class="token operator">/</span>nginx<span class="token operator">/</span>src<span class="token operator">/</span>ngx_devel_kit <span class="token operator">--</span>add<span class="token operator">-</span>module<span class="token operator">=</span><span class="token operator">/</span>www<span class="token operator">/</span>server<span class="token operator">/</span>nginx<span class="token operator">/</span>src<span class="token operator">/</span>lua_nginx_module <span class="token operator">--</span>add<span class="token operator">-</span>module<span class="token operator">=</span><span class="token operator">/</span>www<span class="token operator">/</span>server<span class="token operator">/</span>nginx<span class="token operator">/</span>src<span class="token operator">/</span>ngx_cache_purge <span class="token operator">--</span>add<span class="token operator">-</span>module<span class="token operator">=</span><span class="token operator">/</span>www<span class="token operator">/</span>server<span class="token operator">/</span>nginx<span class="token operator">/</span>src<span class="token operator">/</span>nginx<span class="token operator">-</span>sticky<span class="token operator">-</span>module <span class="token operator">--</span><span class="token keyword">with</span><span class="token operator">-</span>http_stub_status_module <span class="token operator">--</span><span class="token keyword">with</span><span class="token operator">-</span>http_ssl_module <span class="token operator">--</span><span class="token keyword">with</span><span class="token operator">-</span>http_v2_module <span class="token operator">--</span><span class="token keyword">with</span><span class="token operator">-</span>http_image_filter_module <span class="token operator">--</span><span class="token keyword">with</span><span class="token operator">-</span>http_gzip_static_module <span class="token operator">--</span><span class="token keyword">with</span><span class="token operator">-</span>http_gunzip_module <span class="token operator">--</span><span class="token keyword">with</span><span class="token operator">-</span>stream <span class="token operator">--</span><span class="token keyword">with</span><span class="token operator">-</span>stream_ssl_module <span class="token operator">--</span><span class="token keyword">with</span><span class="token operator">-</span>ipv6 <span class="token operator">--</span><span class="token keyword">with</span><span class="token operator">-</span>http_sub_module <span class="token operator">--</span><span class="token keyword">with</span><span class="token operator">-</span>http_flv_module <span class="token operator">--</span><span class="token keyword">with</span><span class="token operator">-</span>http_addition_module <span class="token operator">--</span><span class="token keyword">with</span><span class="token operator">-</span>http_realip_module <span class="token operator">--</span><span class="token keyword">with</span><span class="token operator">-</span>http_mp4_module <span class="token operator">--</span><span class="token keyword">with</span><span class="token operator">-</span>ld<span class="token operator">-</span>opt<span class="token operator">=</span><span class="token string">&quot;-Wl,-E&quot;</span> <span class="token operator">--</span><span class="token keyword">with</span><span class="token operator">-</span>openssl<span class="token operator">-</span>opt<span class="token operator">=</span><span class="token string">&quot;enable-tls1_3 enable-weak-ssl-ciphers&quot;</span> <span class="token operator">--</span><span class="token keyword">with</span><span class="token operator">-</span>cc<span class="token operator">-</span>opt<span class="token operator">=</span><span class="token string">&quot;-Wno-error&quot;</span> <span class="token operator">--</span><span class="token keyword">with</span><span class="token operator">-</span>ld<span class="token operator">-</span>opt<span class="token operator">=</span><span class="token string">&quot;-ljemalloc&quot;</span>
# make <span class="token operator">&amp;&amp;</span> make install 
</code></pre></div><p>\u91CD\u542Fnginx\u5373\u53EF</p>`,21);function o(t,e){return p}var l=a(n,[["render",o]]);export{l as default};
