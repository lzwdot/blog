import{h as n}from"./app.4ca8afde.js";import{_ as s}from"./plugin-vue_export-helper.21dcd24c.js";const a={},t=n(`<h1 id="wordpress\u63A5\u5165\u718A\u638C\u53F7" tabindex="-1"><a class="header-anchor" href="#wordpress\u63A5\u5165\u718A\u638C\u53F7" aria-hidden="true">#</a> WordPress\u63A5\u5165\u718A\u638C\u53F7</h1><p>\u767E\u5EA6\u718A\u638C\u53F7\u5DF2\u7ECF\u63A8\u51FA\u4E00\u6BB5\u65F6\u95F4\u4E86\uFF0C\u5404WordPress\u7AD9\u957F\u4E5F\u7EB7\u7EB7\u5F00\u59CB\u63A5\u5165\u718A\u638C\u53F7\uFF0C\u672C\u4EBA\u4E5F\u6839\u636E\u718A\u638C\u53F7\u6587\u6863\u8FDB\u884C\u9875\u9762\u6539\u9020\uFF0C\u901A\u8FC7\u4EE3\u7801\u63A5\u5165\u718A\u638C\u53F7\uFF0C\u7279\u6B64\u8BB0\u5F55\uFF0C\u8FD9\u91CC\u6240\u6709\u4EE3\u7801\u90FD\u6DFB\u52A0\u5728functions.php\u4E2D</p><blockquote><p>\u718A\u638C\u53F7\u63A5\u5165\u6700\u57FA\u672C\u8981\u6C42\u662F\u9875\u9762\u80FD\u81EA\u9002\u5E94\u79FB\u52A8\u7AEF</p></blockquote><h3 id="\u8D44\u6E90\u63D0\u4EA4" tabindex="-1"><a class="header-anchor" href="#\u8D44\u6E90\u63D0\u4EA4" aria-hidden="true">#</a> \u8D44\u6E90\u63D0\u4EA4</h3><blockquote><p>\u65B0\u589E\u5185\u5BB9 | \u5386\u53F2\u5185\u5BB9</p></blockquote><p>\u65B0\u589E\u5185\u5BB9\u6709\u6570\u91CF\u9650\u5236\uFF0C\u5EFA\u8BAE\u5408\u9002\u4F7F\u7528</p><p>\u76F4\u63A5\u4E0A\u4EE3\u7801\uFF1A</p><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">add_custom_to_footer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token doc-comment comment">/** \u718A\u638C\u53F7 **/</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">is_single</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        global $post<span class="token punctuation">;</span>
        $urls <span class="token operator">=</span> <span class="token function">array</span><span class="token punctuation">(</span>
            <span class="token function">get_permalink</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u65B0\u589E\u5185\u5BB9\u63A5\u53E3\u63D0\u4EA4</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token number">24</span><span class="token operator">*</span><span class="token number">60</span><span class="token operator">*</span><span class="token number">60</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token function">time</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token function">strtotime</span><span class="token punctuation">(</span>$post<span class="token operator">-</span><span class="token operator">&gt;</span>post_date<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            $api <span class="token operator">=</span> <span class="token string">&#39;http://data.zz.baidu.com/urls?appid=1565838311535855&amp;token=9IczqdTMGBswNYaR&amp;type=realtime&#39;</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
            <span class="token comment">//\u5386\u53F2\u5185\u5BB9\u63A5\u53E3\u63D0\u4EA4</span>
            $api <span class="token operator">=</span> <span class="token string">&#39;http://data.zz.baidu.com/urls?appid=1565838311535855&amp;token=9IczqdTMGBswNYaR&amp;type=batch&#39;</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        $ch <span class="token operator">=</span> <span class="token function">curl_init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        $options <span class="token operator">=</span> <span class="token function">array</span><span class="token punctuation">(</span>
            <span class="token parameter"><span class="token constant">CURLOPT_URL</span></span> <span class="token operator">=&gt;</span> $api<span class="token punctuation">,</span>
            <span class="token parameter"><span class="token constant">CURLOPT_POST</span></span> <span class="token operator">=&gt;</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            <span class="token parameter"><span class="token constant">CURLOPT_RETURNTRANSFER</span></span> <span class="token operator">=&gt;</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            <span class="token parameter"><span class="token constant">CURLOPT_POSTFIELDS</span></span> <span class="token operator">=&gt;</span> <span class="token function">implode</span><span class="token punctuation">(</span>&quot;
&quot;<span class="token punctuation">,</span> $urls<span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token parameter"><span class="token constant">CURLOPT_HTTPHEADER</span></span> <span class="token operator">=&gt;</span> <span class="token function">array</span><span class="token punctuation">(</span><span class="token string">&#39;Content-Type: text/plain&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">curl_setopt_array</span><span class="token punctuation">(</span>$ch<span class="token punctuation">,</span> $options<span class="token punctuation">)</span><span class="token punctuation">;</span>
        $result <span class="token operator">=</span> <span class="token function">curl_exec</span><span class="token punctuation">(</span>$ch<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">curl_close</span><span class="token punctuation">(</span>$ch<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//echo $result;die;</span>
        <span class="token comment">//\u6210\u529F\u8FD4\u56DE { &quot;remain_realtime&quot;: 9,&quot;success_realtime&quot;: 1}</span>
    <span class="token punctuation">}</span>
    <span class="token doc-comment comment">/** \u718A\u638C\u53F7 **/</span>
<span class="token punctuation">}</span>
<span class="token function">add_action</span><span class="token punctuation">(</span><span class="token string">&#39;wp_footer&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;add_custom_to_footer&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
</code></pre></div><h3 id="\u7C89\u4E1D\u5173\u6CE8" tabindex="-1"><a class="header-anchor" href="#\u7C89\u4E1D\u5173\u6CE8" aria-hidden="true">#</a> \u7C89\u4E1D\u5173\u6CE8</h3><p>\u5728\u9875\u9762\u4E2D\u6DFB\u52A0\u5173\u6CE8\u6309\u94AE\u3002\u8BA9\u7528\u6237\u5728\u6D4F\u89C8\u60A8\u7684\u9875\u9762\u65F6\uFF0C\u901A\u8FC7\u5173\u6CE8\u6309\u94AE\u6210\u4E3A\u60A8\u7684\u7C89\u4E1D\u3002</p><blockquote><p>cambrian.render\u53EF\u4EE5\u4F7F\u7528 head | body | tail</p></blockquote><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">add_custom_to_head</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token doc-comment comment">/** \u718A\u638C\u53F7 **/</span>
    echo <span class="token string">&#39;&lt;script src=&quot;//msite.baidu.com/sdk/c.js?appid=1565838311535855&quot;&gt;&lt;/script&gt;&#39;</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">is_single</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        echo <span class="token string">&quot;&lt;link rel=&quot;</span>canonical<span class="token string">&quot; href=&quot;</span><span class="token string">&quot; . get_permalink() . &quot;</span><span class="token string">&quot;/&gt;&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>cambrian<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token string">&#39;tail&#39;</span><span class="token punctuation">)</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
    <span class="token doc-comment comment">/** \u718A\u638C\u53F7 end **/</span>
<span class="token punctuation">}</span>
<span class="token function">add_action</span><span class="token punctuation">(</span><span class="token string">&#39;wp_head&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;add_custom_to_head&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
</code></pre></div><h3 id="\u53F7\u4E3B\u9875\u5C55\u73B0" tabindex="-1"><a class="header-anchor" href="#\u53F7\u4E3B\u9875\u5C55\u73B0" aria-hidden="true">#</a> \u53F7\u4E3B\u9875\u5C55\u73B0</h3><p>\u8D44\u6E90\u8FDB\u5165\u718A\u638C\u53F7\u4E3B\u9875\u5C55\u73B0\uFF0C\u9700\u8981\u5148\u8FDB\u884C\u9875\u9762\u6539\u9020\uFF0C\u6DFB\u52A0\u51E0\u4E2A\u5FC5\u8981\u7684\u5B57\u6BB5\u3002</p><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token operator">&lt;</span><span class="token operator">?</span>php
$full_img_url <span class="token operator">=</span> <span class="token function">wp_get_attachment_image_src</span><span class="token punctuation">(</span><span class="token function">get_post_thumbnail_id</span><span class="token punctuation">(</span>$post<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token constant">ID</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&#39;full&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
$xdescription <span class="token operator">=</span> <span class="token function">mb_strimwidth</span><span class="token punctuation">(</span><span class="token function">str_replace</span><span class="token punctuation">(</span><span class="token punctuation">[</span>&quot;
<span class="token string">&quot;, &quot;</span>
<span class="token string">&quot;, &quot;</span><span class="token string">&quot;, &quot;</span>    <span class="token string">&quot;, &quot;</span><span class="token punctuation">,</span>&quot;<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&#39; &#39;</span><span class="token punctuation">,</span> <span class="token function">strip_tags</span><span class="token punctuation">(</span>$post<span class="token operator">-</span><span class="token operator">&gt;</span>post_content<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">240</span><span class="token punctuation">,</span> <span class="token string">&#39;\u2026&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">?</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">&quot;application/ld+json&quot;</span><span class="token operator">&gt;</span>
<span class="token punctuation">{</span>
    <span class="token string-property property">&quot;@context&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://ziyuan.baidu.com/contexts/cambrian.jsonld&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;@id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;?php echo get_permalink(); ?&gt;&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;appid&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1565838311535855&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;?php echo the_title(); ?&gt;&quot;</span><span class="token punctuation">,</span>
    <span class="token operator">&lt;</span><span class="token operator">?</span>php <span class="token keyword">if</span> <span class="token punctuation">(</span>$full_img_url<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        echo <span class="token string">&#39;&quot;images&quot;: [&quot;&#39;</span> <span class="token punctuation">.</span> $full_img_url<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token punctuation">.</span> <span class="token string">&#39;&quot;],&#39;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token operator">?</span><span class="token operator">&gt;</span>
    <span class="token string-property property">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;?php echo $xdescription; ?&gt;&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;pubDate&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;?php echo the_time(&#39;Y-n-jTH:i:s&#39;); ?&gt;&quot;</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span> 
</code></pre></div><p>\u8FD9\u6BB5\u4EE3\u7801\u6DFB\u52A0\u5230\u4E0B\u9762\u4EE3\u7801\u4E2D</p><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">add_custom_to_footer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token doc-comment comment">/** \u718A\u638C\u53F7 **/</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">is_single</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        global $post<span class="token punctuation">;</span>
        <span class="token comment">//\u53F7\u4E3B\u9875\u5C55\u73B0</span>
        <span class="token operator">...</span>
        <span class="token comment">//\u8D44\u6E90\u63D0\u4EA4</span>
        <span class="token operator">...</span>
    <span class="token punctuation">}</span>
    <span class="token doc-comment comment">/** \u718A\u638C\u53F7 **/</span>
<span class="token punctuation">}</span> 
</code></pre></div><p>\u6539\u9020\u5B8C\u6210\u540E\uFF0C\u53EF\u4EE5\u5728\u718A\u638C\u53F7\u6821\u9A8C\u5DE5\u5177\u4E2D\u6821\u9A8C\u662F\u5426\u6210\u529F\uFF0C\u8D76\u7D27\u53BB\u8BD5\u8BD5\u5427\u3002</p>`,18);function p(o,c){return t}var l=s(a,[["render",p]]);export{l as default};
