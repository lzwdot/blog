import{d as t,o as e,c,a as n,e as p,F as r,h as o,g as s}from"./app.4ca8afde.js";import{_ as l}from"./plugin-vue_export-helper.21dcd24c.js";const u={},k=o('<h1 id="nginx-\u57DF\u540D\u5B50\u76EE\u5F55\u91CD\u5B9A\u5411\u5176\u4ED6\u76EE\u5F55" tabindex="-1"><a class="header-anchor" href="#nginx-\u57DF\u540D\u5B50\u76EE\u5F55\u91CD\u5B9A\u5411\u5176\u4ED6\u76EE\u5F55" aria-hidden="true">#</a> Nginx \u57DF\u540D\u5B50\u76EE\u5F55\u91CD\u5B9A\u5411\u5176\u4ED6\u76EE\u5F55</h1><p>\u4F8B\u5982\uFF0C<code>example.org</code>\u57DF\u540D\u8FD0\u884C\u7684\u662F <code>/var/www/top/public</code>\u76EE\u5F55\u4E2D\u7684\u7A0B\u5E8F\uFF0C\u73B0\u5728<code>example.org/blog</code>\u9700\u8981\u8FD0\u884C\u53E6\u4E00\u4E2A <code>/var/www/nested/public</code> \u76EE\u5F55\u4E0B\u7684\u7A0B\u5E8F\u3002\u90A3\u8BE5\u600E\u4E48\u64CD\u4F5C\uFF1F</p><p>\u4E4B\u524D\u6709\u4ECB\u7ECD\u8FC7\u7C7B\u4F3C\u7684\u201C\u5355\u57DF\u540D\u4E0B\u8BBF\u95EE\u591A\u4E2Alaravel \u9879\u76EE\u201D</p>',3),i={href:"https://lzwdot.com/blog/archives/17121",target:"_blank",rel:"noopener noreferrer"},d=s("https://lzwdot.com/blog/archives/17121"),_=o(`<p>\u4E0B\u9762\u4ECB\u7ECD Nginx \u4E0B\u7684\u53E6\u4E00\u79CD\u6BD4\u8F83\u597D\u7684\u65B9\u5F0F\uFF0C\u8FD8\u662F\u4EE5 laravel \u5E94\u7528\u4E3A\u4F8B\uFF0C\u76F4\u63A5\u4E0A\u914D\u7F6E\uFF1A</p><div class="language-javascript ext-js"><pre class="language-javascript"><code>server <span class="token punctuation">{</span>
    listen <span class="token number">80</span> default_server<span class="token punctuation">;</span>
    listen <span class="token punctuation">[</span><span class="token operator">:</span><span class="token operator">:</span><span class="token punctuation">]</span><span class="token operator">:</span><span class="token number">80</span> default_server<span class="token punctuation">;</span>
    root <span class="token operator">/</span><span class="token keyword">var</span><span class="token operator">/</span>www<span class="token operator">/</span>top<span class="token operator">/</span><span class="token keyword">public</span><span class="token punctuation">;</span>
    index index<span class="token punctuation">.</span>html index<span class="token punctuation">.</span>htm index<span class="token punctuation">.</span>php<span class="token punctuation">;</span>
    server_name _<span class="token punctuation">;</span>
    location <span class="token operator">/</span> <span class="token punctuation">{</span>
        try_files $uri $uri<span class="token operator">/</span> <span class="token operator">/</span>index<span class="token punctuation">.</span>php$is_args$args<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    location <span class="token operator">/</span>nested <span class="token punctuation">{</span>
        alias <span class="token operator">/</span><span class="token keyword">var</span><span class="token operator">/</span>www<span class="token operator">/</span>nested<span class="token operator">/</span><span class="token keyword">public</span><span class="token punctuation">;</span>
        try_files $uri $uri<span class="token operator">/</span> @nested<span class="token punctuation">;</span>
        location <span class="token operator">~</span> <span class="token punctuation">.</span>php$ <span class="token punctuation">{</span>
            include snippets<span class="token operator">/</span>fastcgi<span class="token operator">-</span>php<span class="token punctuation">.</span>conf<span class="token punctuation">;</span>
            fastcgi_param <span class="token constant">SCRIPT_FILENAME</span> $request_filename<span class="token punctuation">;</span>
            fastcgi_pass unix<span class="token operator">:</span><span class="token operator">/</span><span class="token keyword">var</span><span class="token operator">/</span>run<span class="token operator">/</span>php<span class="token operator">/</span>php7<span class="token punctuation">.</span><span class="token number">2</span><span class="token operator">-</span>fpm<span class="token punctuation">.</span>sock<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    location @nested <span class="token punctuation">{</span>
        rewrite <span class="token operator">/</span>nested<span class="token operator">/</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token operator">*</span><span class="token punctuation">)</span>$ <span class="token operator">/</span>nested<span class="token operator">/</span>index<span class="token punctuation">.</span>php<span class="token operator">?</span><span class="token operator">/</span>$1 last<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    location <span class="token operator">~</span> <span class="token punctuation">.</span>php$ <span class="token punctuation">{</span>
        include snippets<span class="token operator">/</span>fastcgi<span class="token operator">-</span>php<span class="token punctuation">.</span>conf<span class="token punctuation">;</span>
        fastcgi_pass unix<span class="token operator">:</span><span class="token operator">/</span><span class="token keyword">var</span><span class="token operator">/</span>run<span class="token operator">/</span>php<span class="token operator">/</span>php7<span class="token punctuation">.</span><span class="token number">2</span><span class="token operator">-</span>fpm<span class="token punctuation">.</span>sock<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>\u914D\u7F6E\u4E0A\u540E\uFF0C\u4E24\u4E2A laravel \u5E94\u7528\u90FD\u53EF\u4EE5\u6B63\u5E38\u8BBF\u95EE\u4E86\uFF0C\u4F46\u53EF\u80FD\u51FA\u73B0\u8BBF\u95EE\u4E0D\u4E86 css \u7B49\u9759\u6001\u6587\u4EF6\uFF0C\u6240\u4EE5\u9700\u8981\u6DFB\u52A0\u914D\u7F6E\uFF1A</p><div class="language-javascript ext-js"><pre class="language-javascript"><code>location <span class="token operator">~</span> <span class="token punctuation">.</span><span class="token operator">*</span><span class="token punctuation">.</span><span class="token punctuation">(</span>gif<span class="token operator">|</span>jpg<span class="token operator">|</span>jpeg<span class="token operator">|</span>png<span class="token operator">|</span>bmp<span class="token operator">|</span>swf<span class="token punctuation">)</span>$
<span class="token punctuation">{</span>
    expires      30d<span class="token punctuation">;</span>
    error_log off<span class="token punctuation">;</span>
    access_log <span class="token operator">/</span>dev<span class="token operator">/</span><span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
location <span class="token operator">~</span> <span class="token punctuation">.</span><span class="token operator">*</span><span class="token punctuation">.</span><span class="token punctuation">(</span>js<span class="token operator">|</span>css<span class="token punctuation">)</span><span class="token operator">?</span>$
<span class="token punctuation">{</span>
    expires      12h<span class="token punctuation">;</span>
    error_log off<span class="token punctuation">;</span>
    access_log <span class="token operator">/</span>dev<span class="token operator">/</span><span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>\u4E00\u5207OK\u4E86\uFF0C\u611F\u89C9\u6BD4\u4E4B\u524D\u90A3\u4E2A\u65B9\u5F0F\u8981\u5B89\u5168\uFF0C\u5C31\u662F\u914D\u7F6E\u4F1A\u6BD4\u8F83\u9EBB\u70E6\u70B9\uFF0C\u6BCF\u6B21\u589E\u52A0\u4E00\u4E2A\u5E94\u7528\uFF0C\u90FD\u9700\u8981\u914D\u7F6E\u4E00\u6B21\u3002</p>`,5),h=s("\u53C2\u8003\uFF1A"),g={href:"https://serversforhackers.com/c/nginx-php-in-subdirectory",target:"_blank",rel:"noopener noreferrer"},f=s("https://serversforhackers.com/c/nginx-php-in-subdirectory");function v(m,x){const a=t("ExternalLinkIcon");return e(),c(r,null,[k,n("p",null,[n("a",i,[d,p(a)])]),_,n("p",null,[h,n("a",g,[f,p(a)])])],64)}var $=l(u,[["render",v]]);export{$ as default};
