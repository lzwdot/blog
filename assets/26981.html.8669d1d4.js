import{d as t,o as p,c as o,a as n,e,F as c,h as s,g as l}from"./app.4ca8afde.js";import{_ as r}from"./plugin-vue_export-helper.21dcd24c.js";const k={},u=s(`<h1 id="vue-\u7684\u865A\u62DF-dom" tabindex="-1"><a class="header-anchor" href="#vue-\u7684\u865A\u62DF-dom" aria-hidden="true">#</a> Vue \u7684\u865A\u62DF DOM</h1><p>\u865A\u62DF DOM \uFF08vdom\uFF09\u548C diff</p><blockquote><p>diff \u7B97\u6CD5\u662F vdom \u4E2D\u6700\u6838\u5FC3\uFF0C\u6700\u5173\u952E\u7684\u90E8\u5206</p></blockquote><ul><li>DOM \u64CD\u4F5C\u975E\u5E38\u8017\u8D39\u6027\u80FD</li><li>\u4EE5\u524D\u4F7F\u7528 jQuery \u53EF\u4EE5\u81EA\u884C\u624B\u52A8\u63A7\u5236\u64CD\u4F5C DOM</li><li>\u800C Vue \u662F\u6570\u636E\u9A71\u52A8\u89C6\u56FE\uFF0C\u5982\u4F55\u6709\u6548\u63A7\u5236 DOM \u64CD\u4F5C\uFF1F</li></ul><p>\u89E3\u51B3\u65B9\u6848 - vdom</p><ul><li>\u6709\u4E86\u4E00\u5B9A\u590D\u6742\u5EA6\uFF0C\u60F3\u51CF\u5C11\u8BA1\u7B97\u6B21\u6570\u6BD4\u8F83\u96BE</li><li>\u90A3\u4E48\u53EF\u4EE5\u628A\u66F4\u591A\u8BA1\u7B97\u8F6C\u79FB\u4E3A JS \u8BA1\u7B97\uFF0C\u56E0\u4E3A JS \u6267\u884C\u901F\u5EA6\u5F88\u5FEB</li><li>vdom - \u7528 JS \u6A21\u62DF DOM \u7ED3\u6784\uFF0C\u8BA1\u7B97\u51FA\u6700\u5C0F\u7684\u53D8\u66F4\uFF0C\u64CD\u4F5C DOM</li></ul><p>\u7528 JS \u6A21\u62DF DOM \u7ED3\u6784\uFF0C\u4E3E\u4E2A\u4F8B\u5B50\u6709\u8FD9\u6837\u4E00\u6BB5 html \u7ED3\u6784</p><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;div1&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;container&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>vdom<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>ul style<span class="token operator">=</span><span class="token string">&quot;font-size: 20px&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span>a<span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
</code></pre></div><p>html \u53EF\u4EE5\u770B\u6210 xml \u7ED3\u6784\uFF0C\u901A\u8FC7 json \u5BF9\u8C61\u6765\u8868\u793A\uFF0C\u6BD4\u5982</p><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token punctuation">{</span>
    <span class="token literal-property property">tag</span><span class="token operator">:</span> <span class="token string">&#39;div&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">className</span><span class="token operator">:</span> <span class="token string">&#39;container&#39;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&#39;div1&#39;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            <span class="token literal-property property">tag</span><span class="token operator">:</span> <span class="token string">&#39;p&#39;</span><span class="token punctuation">,</span>
            <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token string">&#39;vdom&#39;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
            <span class="token literal-property property">tag</span><span class="token operator">:</span> <span class="token string">&#39;ul&#39;</span><span class="token punctuation">,</span>
            <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token literal-property property">style</span><span class="token operator">:</span> <span class="token string">&#39;font-size: 20px&#39;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token punctuation">{</span>
                    <span class="token literal-property property">tag</span><span class="token operator">:</span> <span class="token string">&#39;li&#39;</span><span class="token punctuation">,</span>
                    <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token string">&#39;a&#39;</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token comment">//...</span>
            <span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>\u901A\u8FC7 snabbdom \u5B66\u4E60 vdom</p>`,11),i=n("li",null,"\u7B80\u6D01\u5F3A\u5927\u7684 vdom \u5E93\uFF0C\u6613\u5B66\u6613\u7528",-1),d=n("li",null,"Vue \u53C2\u8003\u5B83\u5B9E\u73B0\u7684 vdom \u548C diff",-1),g={href:"https://github.com/snabbdom/snabbdom",target:"_blank",rel:"noopener noreferrer"},m=l("https://github.com/snabbdom/snabbdom"),b=n("li",null,"Vue 3.0 \u91CD\u65B0\u4E86 vdom \u7684\u4EE3\u7801\uFF0C\u4F18\u5316\u4E86\u6027\u80FD\uFF0C\u4F46 vdom \u57FA\u672C\u7406\u5FF5\u4E0D\u53D8",-1),h=s(`<p>snabbdom \u5E93\u6F14\u793A</p><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;container&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>button id<span class="token operator">=</span><span class="token string">&quot;btn-change&quot;</span><span class="token operator">&gt;</span>change<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">&quot;https://cdn.bootcss.com/snabbdom/0.7.3/snabbdom.js&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">&quot;https://cdn.bootcss.com/snabbdom/0.7.3/snabbdom-class.js&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">&quot;https://cdn.bootcss.com/snabbdom/0.7.3/snabbdom-props.js&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">&quot;https://cdn.bootcss.com/snabbdom/0.7.3/snabbdom-style.js&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">&quot;https://cdn.bootcss.com/snabbdom/0.7.3/snabbdom-eventlisteners.js&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">&quot;https://cdn.bootcss.com/snabbdom/0.7.3/h.js&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
    <span class="token keyword">const</span> snabbdom <span class="token operator">=</span> window<span class="token punctuation">.</span>snabbdom
    <span class="token comment">// \u5B9A\u4E49 patch</span>
    <span class="token keyword">const</span> patch <span class="token operator">=</span> snabbdom<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
        snabbdom_class<span class="token punctuation">,</span>
        snabbdom_props<span class="token punctuation">,</span>
        snabbdom_style<span class="token punctuation">,</span>
        snabbdom_eventlisteners
    <span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token comment">// \u5B9A\u4E49 h</span>
    <span class="token keyword">const</span> h <span class="token operator">=</span> snabbdom<span class="token punctuation">.</span>h
    <span class="token keyword">const</span> container <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;container&#39;</span><span class="token punctuation">)</span>
    <span class="token comment">// \u751F\u6210 vnode</span>
    <span class="token keyword">const</span> vnode <span class="token operator">=</span> <span class="token function">h</span><span class="token punctuation">(</span><span class="token string">&#39;ul#list&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
        <span class="token function">h</span><span class="token punctuation">(</span><span class="token string">&#39;li.item&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&#39;Item 1&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token function">h</span><span class="token punctuation">(</span><span class="token string">&#39;li.item&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&#39;Item 2&#39;</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token function">patch</span><span class="token punctuation">(</span>container<span class="token punctuation">,</span> vnode<span class="token punctuation">)</span>
    document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;btn-change&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;click&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// \u751F\u6210 newVnode</span>
        <span class="token keyword">const</span> newVnode <span class="token operator">=</span> <span class="token function">h</span><span class="token punctuation">(</span><span class="token string">&#39;ul#list&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
            <span class="token function">h</span><span class="token punctuation">(</span><span class="token string">&#39;li.item&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&#39;Item 1&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token function">h</span><span class="token punctuation">(</span><span class="token string">&#39;li.item&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&#39;Item B&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token function">h</span><span class="token punctuation">(</span><span class="token string">&#39;li.item&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&#39;Item 3&#39;</span><span class="token punctuation">)</span>
        <span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token function">patch</span><span class="token punctuation">(</span>vnode<span class="token punctuation">,</span> newVnode<span class="token punctuation">)</span>
        <span class="token comment">// vnode = newVnode // patch \u4E4B\u540E\uFF0C\u5E94\u8BE5\u7528\u65B0\u7684\u8986\u76D6\u73B0\u6709\u7684 vnode \uFF0C\u5426\u5219\u6BCF\u6B21 change \u90FD\u662F\u65B0\u65E7\u5BF9\u6BD4</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre></div>`,2);function v(y,_){const a=t("ExternalLinkIcon");return p(),o(c,null,[u,n("ul",null,[i,d,n("li",null,[n("a",g,[m,e(a)])]),b]),h],64)}var j=r(k,[["render",v]]);export{j as default};
