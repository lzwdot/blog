<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>代码测试</title>
    <link rel="stylesheet" href="./index.css">
</head>

<body>
<h1>index</h1>
<img src="./index.jpg" alt="">

<script src="./index.js"></script>
<script>
  // 普通调用
  const p1 = new MyPromise((resolve, reject) => {
    // resolve(100)
    // reject('错误...')
    setTimeout(() => {
      resolve(100)
    }, 1000)
  })

  // 链式调用
  const p11 = p1.then(data1 => {
    console.log('data1', data1) // data1 100
    return data1 + 1
  })
  const p12 = p11.then(data2 => {
    console.log('data2', data2) // data2 101
    return data2 + 1
  })
  const p13 = p12.catch(err => console.error(err))

  // api 调用
  const p2 = MyPromise.resolve(200)
  const p3 = MyPromise.resolve(300)
  const p4 = MyPromise.reject('错误...')
  // 传入 promise 数组，等待所有的都 fulfilled 后，返回新的 promise 包含前面所有的结果
  const p5 = MyPromise.all([p1, p2, p3])
  p5.then(result => console.log('all result', result)) // all result (3)[200, 300, 100]
  // 传入 promise 数组，只要有一个 fulfilled 即可返回
  const p6 = MyPromise.race([p1, p2, p3])
  p6.then(result => console.log('race result', result)) // race result 200
</script>
</body>

</html>